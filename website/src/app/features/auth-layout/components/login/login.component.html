<div class="container-fluid pb-5">
  <div class="row justify-content-center">
    <div class="col-11">
      <p class="py-3 text-color-primary">
        <span class="pointer" (click)="navigateTo('/')">Home</span> / Log in to
        your account
      </p>
    </div>
    <div *ngIf="!user" class="col-11 py-4">
      <h2>Log in to your account</h2>
    </div>
    <div *ngIf="!user" class="col-11 px-3 py-4 border">
      <form [formGroup]="loginForm" class="pb-3 border-bottom">
        <div class="row g-3 align-items-center justify-content-between">
          <div class="col-2">
            <label for="inputPassword6" class="col-form-label">Email</label>
          </div>
          <div class="col-12 col-md-12 col-lg-8">
            <input
              type="email"
              class="form-control background-primary"
              formControlName="email"
            />
          </div>
          <div class="col-2"></div>
        </div>
        <div class="row g-3 py-3 align-items-center justify-content-between">
          <div class="col-2">
            <label for="inputPassword6" class="col-form-label">Password</label>
          </div>
          <div class="col-12 col-md-12 col-lg-8 password-input">
            <input
              [type]="showEye ? 'password' : 'text'"
              class="form-control background-primary"
              formControlName="password"
            />
            @if(showEye){
            <div class="icon-box" (click)="showEye = !showEye">
              <i class="fa-solid fa-eye-slash pointer"></i>
            </div>
            } @else{
            <div class="icon-box" (click)="showEye = !showEye">
              <i class="fa-solid fa-eye pointer"></i>
            </div>
            }
          </div>
          <div class="col-2"></div>
        </div>
        <div class="row py-3">
          <div class="col-12 d-flex justify-content-center">
            <span class="pointer" (click)="navigateTo('/auth/forgot-pass')"
              >Forgot your password?</span
            >
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-4 col-md-2 col-lg-1 d-flex justify-content-center">
            <button class="btn btn-dark py-2 px-3" (click)="submit()">
              Sign in
            </button>
          </div>
        </div>
      </form>
      <div class="row pt-3">
        <div class="col-12 d-flex justify-content-center">
          <p class="pointer" (click)="navigateTo('/auth/register')">
            No account? Create one here
            <i class="fa-solid fa-chevron-right"></i>
          </p>
        </div>
      </div>
    </div>
    <div *ngIf="user" class="col-11 py-4">
      <h2>You are Already Logged in</h2>
    </div>
    <div *ngIf="user" class="col-11 p-3 address-column border-top">
      <div *ngIf="showAddressForm" class="row justify-content-center">
        <div class="col-6 mb-4">
          <h3 class="text-center">
            {{ addressId ? "Update" : "Create" }} Address
          </h3>
        </div>
        <form [formGroup]="addressForm" class="pb-3">
          <div class="row my-3">
            <div class="col-12 col-lg-2 d-flex align-items-center my-1">
              <label for="inputPassword6" class="col-form-label">Name</label>
            </div>
            <div class="col-12 col-lg-9 d-flex me-3 my-1">
              <input
                type="text"
                class="form-control background-primary"
                formControlName="name"
              />
            </div>
          </div>
          <div class="row my-3">
            <div class="col-12 col-lg-2 d-flex align-items-center my-1">
              <label for="inputPassword6" class="col-form-label">Address</label>
            </div>
            <div class="col-12 col-lg-9 me-3 my-1">
              <textarea
                formControlName="location"
                class="form-control background-primary"
                cols="10"
              ></textarea>
            </div>
          </div>
          <div class="row my-3">
            <div class="col-12 col-lg-2 d-flex align-items-center my-1">
              <label for="inputPassword6" class="col-form-label">City</label>
            </div>
            <div class="col-12 col-lg-9 me-3 my-1">
              <input
                type="text"
                class="form-control background-primary"
                formControlName="city"
              />
            </div>
          </div>

          <div class="row my-3">
            <div class="col-12 col-lg-2 d-flex align-items-center my-1">
              <label for="inputPassword6" class="col-form-label">State</label>
            </div>
            <div class="col-12 col-lg-9 me-3 my-1">
              <input
                type="text"
                class="form-control background-primary"
                formControlName="state"
              />
            </div>
          </div>
          <div class="row my-3">
            <div class="col-12 col-lg-2 d-flex align-items-center my-1">
              <label for="inputPassword6" class="col-form-label">Country</label>
            </div>
            <div class="col-12 col-lg-9 me-3 my-1">
              <input
                type="text"
                class="form-control background-primary"
                formControlName="country"
              />
            </div>
          </div>
          <div class="row my-3">
            <div class="col-12 col-lg-2 d-flex align-items-center my-1">
              <label for="inputPassword6" class="col-form-label"
                >Pin code</label
              >
            </div>
            <div class="col-12 col-lg-9 my-1 me-3">
              <input
                type="number"
                class="form-control background-primary"
                formControlName="pinCode"
              />
            </div>
          </div>
          <div class="row my-3">
            <div class="col-12 col-lg-2 d-flex align-items-center my-1">
              <label for="inputPassword6" class="col-form-label">Type</label>
            </div>
            <div class="col-12 col-lg-2 d-flex me-3 my-1">
              <div class="d-flex px-2 align-items-center">
                <input
                  class="form-check-input me-2 background-primary"
                  type="radio"
                  name="type"
                  id="typeHome"
                  value="home"
                  formControlName="type"
                />
                <label class="form-check-label" for="typeHome">Home</label>
              </div>
              <div class="d-flex px-2 align-items-center">
                <input
                  class="form-check-input me-2 background-primary"
                  type="radio"
                  name="type"
                  id="typeWork"
                  value="work"
                  formControlName="type"
                />
                <label class="form-check-label" for="typeWork">Work</label>
              </div>
              <div class="d-flex px-2 align-items-center">
                <input
                  class="form-check-input me-2 background-primary"
                  type="radio"
                  name="type"
                  id="typeOther"
                  value="other"
                  formControlName="type"
                />
                <label class="form-check-label" for="typeOther">Other</label>
              </div>
            </div>
          </div>
          <div class="row my-3 justify-content-center">
            <div class="col-3 col-md-2 col-lg-2 me-2">
              <button
                *ngIf="!addressId"
                class="btn bg-dark p-2 w-100 text-light rounded-0"
                (click)="createAddress()"
              >
                Save
              </button>
              <button
                *ngIf="addressId"
                class="btn bg-dark p-2 w-100 text-light rounded-0"
                (click)="update()"
              >
                Update
              </button>
              
            </div>
            <div class="col-3 col-md-2 col-lg-2">
              <button
                *ngIf="addressId"
                class="btn bg-dark p-2 w-100 text-light rounded-0"
                (click)="showAddressForm = !showAddressForm"
              >
                Cancel
              </button>
            </div>
          </div>
        </form>
      </div>
      <div *ngIf="!showAddressForm" class="row pb-2 justify-content-between">
        <div class="col-6 col-md-4 col-lg-3 mb-5">
          <button
            (click)="showAddressForm = !showAddressForm"
            class="btn px-3 py-2 btn-dark rounded-0"
          >
            <i class="fa-solid fa-plus"></i>
            Add a new address
          </button>
        </div>
        <div class="col-12 mb-3">
          <span class="small-text text-muted">
            {{ allAddresses.length }} SAVED
            {{ allAddresses.length == 1 ? "ADDRESS" : "ADDRESSES" }}
          </span>
        </div>
        <div class="col-12">
          <div class="row justify-content-around">
            <div
              *ngFor="let add of allAddresses; let i = index"
              class="col-12 col-sm-12 col-md-5 col-lg-5 card position-relative p-4"
            >
              <div class="row">
                <div class="col-9">
                  <div class="d-flex mb-3 align-items-center">
                    <p>{{ add?.name }}</p>
                    <span class="bg-light small-text text-muted p-1 ms-2">{{
                      add.type
                    }}</span>
                  </div>
                  <p class="mb-3">
                    {{ add?.location }}
                  </p>
                  <p>{{ add?.phone }}</p>
                </div>
                <div class="col-3 d-flex justify-content-end">
                  <span *ngIf="show" (click)="showMenuIndex = i">
                    <i class="pointer fa-solid fa-ellipsis-vertical"></i>
                  </span>
                  <div
                    *ngIf="showMenuIndex == i"
                    class="row address-action bg-light"
                  >
                    <span
                      class="col-12 h-50 d-flex align-items-center p-3 pointer"
                      (click)="edit(add)"
                    >
                      Edit
                    </span>
                    <span
                      class="col-12 h-50 d-flex align-items-center p-3 pointer"
                      (click)="deleteAdd(add?.id)"
                    >
                      Delete
                    </span>
                  </div>
                  <div [class.bg-success]="add.isDefault" class="badge pointer">
                    <span
                      [class.text-light]="add.isDefault"
                      [class.text-dark]="!add.isDefault"
                      (click)="setDefault(add.id)"
                      >Set Default</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
